<div class="container mx-auto p-4 max-w-4xl"> <h1 class="text-3xl font-bold mb-4">
    <span *ngIf="isEditMode">Edit Bed</span>
    <span *ngIf="!isEditMode && isWizardFlow">Add Beds to {{ roomName }} (Step 3 of 3)</span>
    <span *ngIf="!isEditMode && !isWizardFlow">Create Bed</span>
  </h1>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
    
    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="bg-white p-6 rounded shadow-md border">
      
      <h3 class="text-xl font-semibold mb-4">{{ isEditMode ? 'Edit Bed Details' : 'Add a New Bed' }}</h3>

      <div *ngIf="successMessage" class="mb-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded">
        {{ successMessage }}
      </div>
      
      <div class="mb-4" *ngIf="!isWizardFlow && !isEditMode">
        <label for="roomId" class="block text-gray-700 font-bold mb-2">Room</label>
        <select id="roomId" formControlName="roomId" 
                class="w-full px-3 py-2 border rounded"
                [class.border-red-500]="form.get('roomId')?.invalid && form.get('roomId')?.touched">
          <option [value]="null" disabled>Select a Room</option>
          <option *ngFor="let room of rooms" [value]="room.roomId">
            {{ room.roomName }}
          </option>
        </select>
      </div>

      <div class="mb-4">
        <label for="bedNumber" class="block text-gray-700 font-bold mb-2">Bed Number / Name</label>
        <input type="text" id="bedNumber" formControlName="bedNumber"
              placeholder="e.g., 'Bed 1' or 'Top Bunk'"
              class="w-full px-3 py-2 border rounded"
              [class.border-red-500]="form.get('bedNumber')?.invalid && form.get('bedNumber')?.touched">
      </div>

      <div class="flex items-center space-x-4">
        <button type="submit" [disabled]="form.invalid || isLoading"
                class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded disabled:bg-gray-400 disabled:opacity-50">
          <span *ngIf="isLoading">Saving...</span>
          <span *ngIf="!isLoading && isEditMode">Update Bed</span>
          <span *ngIf="!isLoading && !isEditMode">Save Bed</span>
        </button>

        <button type="button" (click)="onCancel()"
                class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded">
          {{ (isWizardFlow || isEditMode) ? 'Finish' : 'Cancel' }}
        </button>
      </div>
    </form>

    <div *ngIf="isWizardFlow" class="bg-white p-6 rounded shadow-md border">
      <h3 class="text-xl font-semibold mb-4">Beds in {{ roomName }} ({{ bedsInThisRoom.length }})</h3>
      <div *ngIf="bedsInThisRoom.length === 0" class="text-gray-500 text-center py-4">
        No beds created for this room yet.
      </div>
      <ul class="divide-y divide-gray-200">
        <li *ngFor="let bed of bedsInThisRoom" class="py-2">
          <span class.text-gray-700>Bed {{ bed.bedNumber }}</span>
        </li>
      </ul>
    </div>
  </div>
</div>